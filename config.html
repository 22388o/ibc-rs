<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuration - Hermes (IBC Relayer CLI) Documentation</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Hermes (v0.13.0)</li><li class="spacer"></li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="relayer.html"><strong aria-hidden="true">1.1.</strong> What is Hermes?</a></li></ol></li><li class="chapter-item expanded "><a href="features.html"><strong aria-hidden="true">2.</strong> Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="features/matrix.html"><strong aria-hidden="true">2.1.</strong> Feature matrix</a></li></ol></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pre_requisites.html"><strong aria-hidden="true">3.1.</strong> Pre-requisites</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">3.2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="config.html" class="active"><strong aria-hidden="true">3.3.</strong> Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="telemetry.html"><strong aria-hidden="true">4.</strong> Telemetry</a></li><li class="chapter-item expanded "><a href="rest-api.html"><strong aria-hidden="true">5.</strong> REST API</a></li><li class="chapter-item expanded "><a href="tutorials/index.html"><strong aria-hidden="true">6.</strong> Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/index.html"><strong aria-hidden="true">6.1.</strong> Local chains</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/gaia.html"><strong aria-hidden="true">6.1.1.</strong> Install Gaia</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/start.html"><strong aria-hidden="true">6.1.2.</strong> Start the local chains</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/identifiers.html"><strong aria-hidden="true">6.1.3.</strong> Identifiers</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/index.html"><strong aria-hidden="true">6.1.4.</strong> Connect the chains using relay paths</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/create-new-path.html"><strong aria-hidden="true">6.1.4.1.</strong> Create a new path</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/relay-paths/multiple-paths.html"><strong aria-hidden="true">6.1.4.2.</strong> Relay packets on multiple paths</a></li></ol></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/index.html"><strong aria-hidden="true">6.1.5.</strong> Connect the chains using raw transactions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/client.html"><strong aria-hidden="true">6.1.5.1.</strong> Configure clients</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/connection.html"><strong aria-hidden="true">6.1.5.2.</strong> Connection handshake</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/channel.html"><strong aria-hidden="true">6.1.5.3.</strong> Channel handshake</a></li><li class="chapter-item expanded "><a href="tutorials/local-chains/raw/packet.html"><strong aria-hidden="true">6.1.5.4.</strong> Relay packets</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="commands/index.html"><strong aria-hidden="true">7.</strong> Commands Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/global.html"><strong aria-hidden="true">7.1.</strong> Global options and JSON output</a></li><li class="chapter-item expanded "><a href="commands/keys/index.html"><strong aria-hidden="true">7.2.</strong> Keys</a></li><li class="chapter-item expanded "><a href="commands/config.html"><strong aria-hidden="true">7.3.</strong> Config</a></li><li class="chapter-item expanded "><a href="commands/path-setup/index.html"><strong aria-hidden="true">7.4.</strong> Path setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/path-setup/clients.html"><strong aria-hidden="true">7.4.1.</strong> Clients</a></li><li class="chapter-item expanded "><a href="commands/path-setup/connections.html"><strong aria-hidden="true">7.4.2.</strong> Connections</a></li><li class="chapter-item expanded "><a href="commands/path-setup/channels.html"><strong aria-hidden="true">7.4.3.</strong> Channels</a></li></ol></li><li class="chapter-item expanded "><a href="commands/relaying/index.html"><strong aria-hidden="true">7.5.</strong> Relaying</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/relaying/packets.html"><strong aria-hidden="true">7.5.1.</strong> Packet Messages</a></li><li class="chapter-item expanded "><a href="commands/relaying/handshakes.html"><strong aria-hidden="true">7.5.2.</strong> Handshake Messages</a></li><li class="chapter-item expanded "><a href="commands/relaying/clear.html"><strong aria-hidden="true">7.5.3.</strong> Clearing Packets</a></li></ol></li><li class="chapter-item expanded "><a href="commands/listen/index.html"><strong aria-hidden="true">7.6.</strong> Listen mode</a></li><li class="chapter-item expanded "><a href="commands/upgrade/index.html"><strong aria-hidden="true">7.7.</strong> Client upgrade</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/upgrade/test.html"><strong aria-hidden="true">7.7.1.</strong> Testing client upgrade</a></li></ol></li><li class="chapter-item expanded "><a href="commands/misbehaviour/index.html"><strong aria-hidden="true">7.8.</strong> Misbehaviour</a></li><li class="chapter-item expanded "><a href="commands/queries/index.html"><strong aria-hidden="true">7.9.</strong> Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/queries/client.html"><strong aria-hidden="true">7.9.1.</strong> Client</a></li><li class="chapter-item expanded "><a href="commands/queries/connection.html"><strong aria-hidden="true">7.9.2.</strong> Connection</a></li><li class="chapter-item expanded "><a href="commands/queries/channel.html"><strong aria-hidden="true">7.9.3.</strong> Channel</a></li><li class="chapter-item expanded "><a href="commands/queries/packet.html"><strong aria-hidden="true">7.9.4.</strong> Packet</a></li><li class="chapter-item expanded "><a href="commands/queries/tx.html"><strong aria-hidden="true">7.9.5.</strong> Tx</a></li></ol></li><li class="chapter-item expanded "><a href="commands/raw/index.html"><strong aria-hidden="true">7.10.</strong> Raw transactions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/raw/client.html"><strong aria-hidden="true">7.10.1.</strong> Client</a></li><li class="chapter-item expanded "><a href="commands/raw/connection.html"><strong aria-hidden="true">7.10.2.</strong> Connection</a></li><li class="chapter-item expanded "><a href="commands/raw/channel-open.html"><strong aria-hidden="true">7.10.3.</strong> Channel Open</a></li><li class="chapter-item expanded "><a href="commands/raw/channel-close.html"><strong aria-hidden="true">7.10.4.</strong> Channel Close</a></li><li class="chapter-item expanded "><a href="commands/raw/packet.html"><strong aria-hidden="true">7.10.5.</strong> Packet</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="help.html"><strong aria-hidden="true">8.</strong> Help</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">9.</strong> Glossary</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hermes (IBC Relayer CLI) Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>In order to run Hermes, you will need to have a configuration file.</p>
<p>The format supported for the configuration file is <a href="https://toml.io/en/">TOML</a>.</p>
<p>By default, Hermes expects the configuration file to be located at <code>$HOME/.hermes/config.toml</code>.</p>
<p>This can be overridden by supplying the <code>-c</code> flag when invoking <code>hermes</code>, before the
name of the command to run, eg. <code>hermes -c my_config.toml query connection channels ibc-1 connection-1</code>.</p>
<blockquote>
<p>The current version of Hermes does not support managing the configuration file programmatically.
You will need to use a text editor to create the file and add content to it.</p>
</blockquote>
<pre><code class="language-bash">hermes [-c CONFIG_FILE] COMMAND
</code></pre>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of contents</a></h2>
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#adding-private-keys">Adding private keys</a></li>
<li><a href="#example-configuration-file">Example configuration file</a></li>
<li><a href="#support-for-interchain-accounts">Support for Interchain Accounts</a></li>
<li><a href="#update-the-configuration-without-restarting-hermes">Update the configuration without restarting Hermes</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ul>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<p>The configuration file must have one <code>global</code> section, and one <code>chains</code> section for each chain.</p>
<blockquote>
<p><strong>Note:</strong> As of 0.6.0, the Hermes configuration file is self-documented.
Please read the configuration file <a href="https://github.com/informalsystems/ibc-rs/blob/v0.13.0/config.toml"><code>config.toml</code></a>
itself for the most up-to-date documentation of parameters.</p>
</blockquote>
<p>By default, Hermes will relay on all channels available between all the configured chains.
In this way, every configured chain will act as a source (in the sense that Hermes listens for events)
and as a destination (to relay packets that others chains have sent).</p>
<p>For example, if there are only two chains configured, then Hermes will only relay packets between those two,
i.e. the two chains will serve as a source for each other, and likewise as a destination for each other's relevant events.
Hermes will ignore all events that pertain to chains which are unknown (ie. not present in config.toml).</p>
<p>To restrict relaying on specific channels, or uni-directionally, you can use <a href="https://github.com/informalsystems/ibc-rs/blob/v0.13.0/config.toml#L207-L224">packet filtering policies</a>.</p>
<h2 id="adding-private-keys"><a class="header" href="#adding-private-keys">Adding private keys</a></h2>
<p>For each chain configured you need to add a private key for that chain in order to submit <a href="./commands/raw/index.html">transactions</a>,
please refer to the <a href="./commands/keys/index.html">Keys</a> sections in order to learn how to add the private keys that are used by the relayer.</p>
<h2 id="example-configuration-file"><a class="header" href="#example-configuration-file">Example configuration file</a></h2>
<p>Here is a full example of a configuration file with two chains configured:</p>
<pre><code class="language-toml"># The global section has parameters that apply globally to the relayer operation.
[global]

# Specify the verbosity for the relayer logging output. Default: 'info'
# Valid options are 'error', 'warn', 'info', 'debug', 'trace'.
log_level = 'info'


# Specify the mode to be used by the relayer. [Required]
[mode]

# Specify the client mode.
[mode.clients]

# Whether or not to enable the client workers. [Required]
enabled = true

# Whether or not to enable periodic refresh of clients. [Default: true]
# This feature only applies to clients that underlie an open channel.
# For Tendermint clients, the frequency at which Hermes refreshes them is 2/3 of their
# trusting period (e.g., refresh every ~9 days if the trusting period is 14 days).
# Note: Even if this is disabled, clients will be refreshed automatically if
#      there is activity on a connection or channel they are involved with.
refresh = true

# Whether or not to enable misbehaviour detection for clients. [Default: false]
misbehaviour = true

# Specify the connections mode.
[mode.connections]

# Whether or not to enable the connection workers for handshake completion. [Required]
enabled = false

# Specify the channels mode.
[mode.channels]

# Whether or not to enable the channel workers for handshake completion. [Required]
enabled = false

# Specify the packets mode.
[mode.packets]

# Whether or not to enable the packet workers. [Required]
enabled = true

# Parametrize the periodic packet clearing feature.
# Interval (in number of blocks) at which pending packets
# should be eagerly cleared. A value of '0' will disable
# periodic packet clearing. [Default: 100]
clear_interval = 100

# Whether or not to clear packets on start. [Default: false]
clear_on_start = true

# Toggle the transaction confirmation mechanism.
# The tx confirmation mechanism periodically queries the `/tx_search` RPC
# endpoint to check that previously-submitted transactions
# (to any chain in this config file) have delivered successfully.
# Experimental feature. Affects telemetry if set to false.
# [Default: true]
tx_confirmation = true

# The REST section defines parameters for Hermes' built-in RESTful API.
# https://hermes.informal.systems/rest.html
[rest]

# Whether or not to enable the REST service. Default: false
enabled = true

# Specify the IPv4/6 host over which the built-in HTTP server will serve the RESTful
# API requests. Default: 127.0.0.1
host = '127.0.0.1'

# Specify the port over which the built-in HTTP server will serve the restful API
# requests. Default: 3000
port = 3000


# The telemetry section defines parameters for Hermes' built-in telemetry capabilities.
# https://hermes.informal.systems/telemetry.html
[telemetry]

# Whether or not to enable the telemetry service. Default: false
enabled = true

# Specify the IPv4/6 host over which the built-in HTTP server will serve the metrics
# gathered by the telemetry service. Default: 127.0.0.1
host = '127.0.0.1'

# Specify the port over which the built-in HTTP server will serve the metrics gathered
# by the telemetry service. Default: 3001
port = 3001


# A chains section includes parameters related to a chain and the full node to which
# the relayer can send transactions and queries.
[[chains]]

# Specify the chain ID. Required
id = 'ibc-0'

# Specify the RPC address and port where the chain RPC server listens on. Required
rpc_addr = 'http://127.0.0.1:26657'

# Specify the GRPC address and port where the chain GRPC server listens on. Required
grpc_addr = 'http://127.0.0.1:9090'

# Specify the WebSocket address and port where the chain WebSocket server
# listens on. Required
websocket_addr = 'ws://127.0.0.1:26657/websocket'

# Specify the maximum amount of time (duration) that the RPC requests should
# take before timing out. Default: 10s (10 seconds)
# Note: Hermes uses this parameter _only_ in `start` mode; for all other CLIs,
# Hermes uses a large preconfigured timeout (on the order of minutes).
rpc_timeout = '10s'

# Specify the prefix used by the chain. Required
account_prefix = 'cosmos'

# Specify the name of the private key to use for signing transactions. Required
# See the Adding Keys chapter for more information about managing signing keys:
#   https://hermes.informal.systems/commands/keys/index.html#adding-keys
key_name = 'testkey'

# Specify the address type which determines:
# 1) address derivation;
# 2) how to retrieve and decode accounts and pubkeys;
# 3) the message signing method.
# The current configuration options are for Cosmos SDK and Ethermint.
#
# Example configuration for chains based on Ethermint library:
#
# address_type = { derivation = 'ethermint', proto_type = { pk_type = '/ethermint.crypto.v1.ethsecp256k1.PubKey' } }
#
# Default: { derivation = 'cosmos' }, i.e. address derivation as in Cosmos SDK.
# Warning: This is an advanced feature! Modify with caution.
address_type = { derivation = 'cosmos' }

# Specify the store prefix used by the on-chain IBC modules. Required
# Recommended value for Cosmos SDK: 'ibc'
store_prefix = 'ibc'

# Specify the default amount of gas to be used in case the tx simulation fails,
# and Hermes cannot estimate the amount of gas needed.
# Default: 100 000
default_gas = 100000

# Specify the maximum amount of gas to be used as the gas limit for a transaction.
# Default: 400 000
max_gas = 400000

# Specify the price per gas used of the fee to submit a transaction and
# the denomination of the fee. Required
gas_price = { price = 0.001, denom = 'stake' }

# Specify the ratio by which to increase the gas estimate used to compute the fee,
# to account for potential estimation error. Default: 0.1, ie. 10%.
# Valid range: 0.0 to 1.0 (inclusive)
gas_adjustment = 1.0

# Specify how many IBC messages at most to include in a single transaction.
# Default: 30
max_msg_num = 30

# Specify the maximum size, in bytes, of each transaction that Hermes will submit.
# Default: 2097152 (2 MiB)
max_tx_size = 2097152

# Specify the maximum amount of time to tolerate a clock drift.
# The clock drift parameter defines how much new (untrusted) header's time
# can drift into the future. Default: 5s
clock_drift = '5s'

# Specify the maximum time per block for this chain.
# The block time together with the clock drift are added to the source drift to estimate
# the maximum clock drift when creating a client on this chain. Default: 10s
# For cosmos-SDK chains a good approximation is `timeout_propose` + `timeout_commit`
max_block_time = '10s'

# Specify the amount of time to be used as the light client trusting period.
# It should be significantly less than the unbonding period
# (e.g. unbonding period = 3 weeks, trusting period = 2 weeks).
# Default: 2/3 of the `unbonding period` for Cosmos SDK chains
trusting_period = '14days'

# Specify the trust threshold for the light client, ie. the maximum fraction of validators
# which have changed between two blocks.
# Default: { numerator = '1', denominator = '3' }, ie. 1/3.
# Warning: This is an advanced feature! Modify with caution.
trust_threshold = { numerator = '1', denominator = '3' }

# Specify a string that Hermes will use as a memo for each transaction it submits
# to this chain. The string is limited to 50 characters. Default: '' (empty).
# Note: Hermes will append to the string defined here additional
# operational debugging information, e.g., relayer build version.
memo_prefix = ''

# This section specifies the filters for policy based relaying.
#
# Default: no policy / filters, allow all packets on all channels.
#
# Only packet filtering based on channel identifier can be specified.
# A channel filter has two fields:
# 1. `policy` - one of two types are supported:
#       - 'allow': permit relaying _only on_ the port/channel id in the list below,
#       - 'deny': permit relaying on any channel _except for_ the list below.
# 2. `list` - the list of channels specified by the port and channel identifiers.
#             Optionally, each element may also contains wildcards, for eg. 'ica*'
#             to match all identifiers starting with 'ica' or '*' to match all identifiers.
#
# Example configuration of a channel filter, only allowing packet relaying on
# channel with port ID 'transfer' and channel ID 'channel-0', as well as on
# all ICA channels.
#
# [chains.packet_filter]
# policy = 'allow'
# list = [
#   ['ica*', '*'],
#   ['transfer', 'channel-0'],
# ]

# Specify that the transaction fees should be payed from this fee granter's account.
# Optional. If unspecified (the default behavior), then no fee granter is used, and
# the account specified in `key_name` will pay the tx fees for all transactions
# submitted to this chain.
# fee_granter = ''

[[chains]]
id = 'ibc-1'
rpc_addr = 'http://127.0.0.1:26557'
grpc_addr = 'http://127.0.0.1:9091'
websocket_addr = 'ws://127.0.0.1:26557/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
default_gas = 100000
max_gas = 400000
gas_price = { price = 0.001, denom = 'stake' }
gas_adjustment = 0.1
max_msg_num = 30
max_tx_size = 2097152
clock_drift = '5s'
max_block_time = '10s'
trusting_period = '14days'
trust_threshold = { numerator = '1', denominator = '3' }
address_type = { derivation = 'cosmos' }
</code></pre>
<h2 id="support-for-interchain-accounts"><a class="header" href="#support-for-interchain-accounts">Support for Interchain Accounts</a></h2>
<p>As of version 0.13.0, Hermes supports relaying on <a href="https://github.com/cosmos/ibc/blob/master/spec/app/ics-027-interchain-accounts/README.md">Interchain Accounts</a> channels.</p>
<p>If the <code>packet_filter</code> option in the chain configuration is disabled, then
Hermes will relay on all existing and future channels, including ICA channels.</p>
<p>There are two kinds of ICA channels:</p>
<ol>
<li>The host channels, whose port is <code>icahost</code></li>
<li>The controller channels, whose port starts with <code>icacontroller-</code> followed
by the owner account address. <a href="https://github.com/cosmos/ibc/blob/master/spec/app/ics-027-interchain-accounts/README.md">See the spec for more details</a>.</li>
</ol>
<p>If you wish to only relay on a few specific standard channels (here <code>channel-0</code> and <code>channel-1</code>),
but also relay on all ICA channels, you can specify the following packet filter:</p>
<blockquote>
<p>Note the use of wildcards in the port and channel identifiers (<code>['ica*', '*']</code>)
to match over all the possible ICA ports.</p>
</blockquote>
<pre><code class="language-toml">[chains.packet_filter]
policy = 'allow'
list = [
  ['ica*', '*'], # allow relaying on all channels whose port starts with `ica`
  ['transfer', 'channel-0'],
  ['transfer', 'channel-1'],
  # Add any other port/channel pairs you wish to relay on
]
</code></pre>
<p>If you wish to relay on all channels but not on ICA channels, you can use
the following packet filter configuration:</p>
<pre><code class="language-toml">[chains.packet_filter]
policy = 'deny'
list = [
  ['ica*', '*'], # deny relaying on all channels whose port starts with `ica`
]
</code></pre>
<h2 id="update-the-configuration-without-restarting-hermes"><a class="header" href="#update-the-configuration-without-restarting-hermes">Update the configuration without restarting Hermes</a></h2>
<blockquote>
<p>⚠️  This feature has been removed in Hermes v0.12.0.</p>
</blockquote>
<p>Before Hermes 0.6.1, the only way to get Hermes to pick up a change in the
configuration was to stop and restart Hermes.</p>
<p>As of version 0.6.1, Hermes will react to receiving a <code>SIGHUP</code> signal
by reloading the <code>[chains]</code> section of the configuration, and
stopping, starting or restarting the affected workers.</p>
<blockquote>
<p><strong>Warning:</strong> the configuration reload feature only supports
adding, removing, or updating configuration of chains. It does
not support dynamically changing global features, such as the
filtering mechanism or logging level.</p>
</blockquote>
<p>For example, say you start with the configuration given in the previous section
in <code>~/.hermes/config.toml</code>, ie. with two chains <code>ibc-0</code> and <code>ibc-1</code>.</p>
<ol>
<li>
<p>Start three chains <code>ibc-0</code>, <code>ibc-1</code> and <code>ibc-2</code>:</p>
<pre><code class="language-shell">./scripts/dev-env ibc-0 ibc-1 ibc-2
</code></pre>
</li>
<li>
<p>Start Hermes</p>
<pre><code class="language-shell">hermes start
</code></pre>
</li>
<li>
<p>Add the configuration for the chain <code>ibc-2</code> to the configuration file:</p>
<pre><code class="language-toml">[[chains]]
id = 'ibc-2'
rpc_addr = 'http://127.0.0.1:26457'
grpc_addr = 'http://127.0.0.1:9092'
websocket_addr = 'ws://127.0.0.1:26457/websocket'
rpc_timeout = '10s'
account_prefix = 'cosmos'
key_name = 'testkey'
store_prefix = 'ibc'
max_gas = 20000000
gas_price = { price = 0.001, denom = 'stake' }
clock_drift = '5s'
trusting_period = '14days'
</code></pre>
</li>
<li>
<p>Change the configuration of the chain <code>ibc-0</code>, eg. the <code>max_gas</code> property.</p>
</li>
<li>
<p>Send a <code>SIGHUP</code> signal to the <code>hermes</code> process:</p>
<blockquote>
<p>⚠️  <strong>Warning:</strong> the command below will send a <code>SIGHUP</code> signal to the first
process in the list emitted by <code>ps aux</code> which contains the string <code>hermes</code>.
Alternatively, you can look up the process ID (PID) of the <code>hermes</code> process
you want to target and use <code>kill -SIGHUP PID</code>.</p>
</blockquote>
<pre><code class="language-shell">ps aux | rg hermes | awk '{ print $2 }' | head -n1 | xargs -I{} kill -SIGHUP {}
</code></pre>
</li>
<li>
<p>Watch the output of Hermes, it will show that Hermes has picked up the changes in
the config. Hermes is now relaying between the three chains and using the new
maximum amount of gas specified for <code>ibc-0</code>.</p>
<pre><code>...

INFO reloading configuration (triggered by SIGHUP)
INFO configuration successfully reloaded
INFO updating existing chain chain.id=ibc-1
INFO adding new chain chain.id=ibc-2
</code></pre>
</li>
</ol>
<p>To make sure Hermes ends up in the expected state, check out the documentation
on <a href="help.html#inspecting-the-relayer-state">inspecting the relayer state</a>.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next steps</a></h2>
<p>Now that you learned how to build the relayer and how to create a configuration file, you can go to the <a href="./tutorials/local-chains/index.html"><code>Two Chains</code></a> tutorial to learn how to perform some local testing connecting the relayer to two local chains.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="telemetry.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="telemetry.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>


    </body>
</html>
